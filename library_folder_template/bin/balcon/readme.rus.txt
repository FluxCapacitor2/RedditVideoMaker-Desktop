Балаболка (консольное приложение), версия 1.57
Copyright (с) 2013-2019 Илья Морозов
Все права защищены

WWW: http://balabolka-tts.ru/bconsole.html
E-mail: crossa@list.ru

Тип лицензии: Freeware
Операционная система: Microsoft Windows XP/Vista/7/8/10
Microsoft Speech API: версия 4.0/5.0 и выше
Microsoft Speech Platform: версия 11.0



*** Командная строка ***

balcon [параметры ...]


*** Параметры командной строки ***

-l
   Показать список голосов, установленных на компьютере.

-g
   Показать список доступных аудиоустройств.

-f <имя_файла>
   Открыть текстовый файл.

-w <имя_файла>
   Записать звуковой файл в формате WAV. Если параметр задан, звуковой файл будет создан. Если параметр не задан, текст будет прочитан вслух.

-n <имя_голоса>
   Выбрать голос (достаточно указать часть его имени). Если параметр не задан, будет использоваться голос, заданный при помощи параметра [-id],
   или голос, выбранный в панели управления Windows.

-id <число>
   Выбрать голос при помощи идентификатора языка (Locale ID). Такие идентификаторы присвоены языкам разработчиками из Microsoft
   (например, "1049" или "0x0419" для русского языка, "1058" или "0x0422" для украинского). Программа выберет из списка первый голос, идентификатора языка которого совпадает с заданным значением.
   Если параметр не задан, будет использоваться голос, заданный при помощи параметра [-n], или голос, выбранный в панели управления Windows.
   Список идентификаторов для языков: https://msdn.microsoft.com/en-us/library/cc233982.aspx

-m
   Показать характеристики выбранного голоса.

-b <число>
   Выбрать аудиоустройство по его номеру в списке доступных устройств для воспроизведения звука. Номер устройства, используемого по умолчанию, равен 0.

-r <текст>
   Выбрать аудиоустройство по его названию.

-c
   Использовать текст из буфера обмена.

-t <текст>
   Использовать текст из командной строки.

-i
   Использовать текст из стандартного потока ввода (STDIN).

-o
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: записать аудиоданные в стандартный поток вывода (STDOUT); если параметр задан, параметр [-w] игнорируется.

-s <число>
   SAPI 4: установить скорость речи в диапазоне от 0 до 100 (значение по умолчанию отсутствует).
   SAPI 5 и Microsoft Speech Platform: установить скорость речи в диапазоне от -10 до 10 (по умолчанию значение равно 0).

-p <число>
   SAPI 4: установить высоту звука в диапазоне от 0 до 100 (значение по умолчанию отсутствует).
   SAPI 5 и Microsoft Speech Platform: установить высоту звука в диапазоне от -10 до 10 (по умолчанию значение равно 0).

-v <число>
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: установить громкость в диапазоне от 0 до 100 (по умолчанию значение равно 100).

-e <число>
   Установить длину пауз между предложениями (в миллисекундах). По умолчанию значение равно 0.

-a <число>
   Установить длину пауз между абзацами (в миллисекундах). По умолчанию значение равно 0.

-d <имя_файла>
   Использовать словарь для коррекции произношения (файл с расширением *.BXD, *.DIC или *.REX). Командная строка может содержать несколько параметров [-d].
   Пользователь может редактировать словарь в приложении "Балаболка".

-k
   Остановить работу других экземпляров консольного приложения, запущенных на компьютере.

-ka
   Остановить работу экземпляра консольного приложения, активного в данный момент.

-pr
   Поставить на паузу или возобновить чтение вслух для экземпляра консольного приложения, активного в данный момент. Действие аналогично выбору пункта контекстного меню "Пауза"/"Продолжить".

-q
   Добавить приложение в очередь. Консольное приложение будет ждать, пока остальные экземпляры программы не завершат работу.

-lrc
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: создать файл формата LRC, если заданы параметры [-w] или [-o].

-srt
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: создать файл формата SRT, если заданы параметры [-w] или [-o].

-vs <file_name>
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: создать текстовый файл с виземами, если задан параметр [-w].
   Визема - форма губ, соответствующая определённому звуку речи. SAPI поддерживает список из 21 виземы.
   Этот список основан на рисунках форм губ персонажей из фильмов компании "Disney". 
   Консольное приложение создаст звуковой файл, а затем воспроизведет его для того, чтобы получить виземы с привязкой по времени.
   Список визем, используемых SAPI 5: https://msdn.microsoft.com/en-us/library/ms720881(v=vs.85).aspx

-sub
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: текст представляет собой субтитры и должен быть преобразован в звуковой файл с учетом заданных интервалов времени.
   Параметр может быть полезен в тех случаях, когда в командной строке заданы параметры [-i] или [-c].

-tray
   Показать иконку программы в области уведомлений операционной системы.
   Это позволит пользователю следить за прогрессом выполнения операции, а также прервать процесс при помощи пункта контекстного меню "Стоп".

-ln <число>
   Выбрать строку из текстового файла, используя её номер. Нумерация строк начинается с "1".
   Для выбора нескольких строк можно указать номера начальной и конечной строк в тексте (например, "26-34").
   Командная строка может содержать несколько параметров [-ln].

-fr <число>
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: установить частоту дискретизации для аудиопотока, в кГц (8, 11, 12, 16, 22, 24, 32, 44, 48).
   Если параметр не задан, используется значение по умолчанию для выбранного голоса.

-bt <число>
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: установить разрядность для аудиопотока, в битах (8 или 16).
   Если параметр не задан, используется значение по умолчанию для выбранного голоса.

-ch <число>
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: установить режим для аудиопотока, моно или стерео (1 или 2).
   Если параметр не задан, используется значение по умолчанию для выбранного голоса.

-? или -h
   Показать описание параметров командной строки.

--encoding <кодировка> или -enc <кодировка>
   Кодировка текста из стандартного потока ввода ("ansi", "utf8" или "unicode"). По умолчанию значение равно "ansi".

--silence-begin <число> или -sb <число>
   Установить длину паузы в начале звукового файла (в миллисекундах). По умолчанию значение равно 0.

--silence-end <число> или -se <число>
   Установить длину паузы в конце звукового файла (в миллисекундах). По умолчанию значение равно 0.

--lrc-length <число>
   Установить максимальную длину строк для файла формата LRC (в символах).

--lrc-fname <имя_файла>
   Имя файла формата LRC. Параметр может быть полезен в тех случаях, когда в командной строке задан параметр [-o].

--lrc-enc <кодировка>
   Кодировка файла формата LRC ("ansi", "utf8" или "unicode"). По умолчанию значение равно "ansi".

--lrc-offset <число>
   Задать сдвиг времени для файла формата LRC (в миллисекундах).

--lrc-artist <текст>
   Тег для файла формата LRC: исполнитель произведения.

--lrc-album <текст>
   Тег для файла формата LRC: альбом.

--lrc-title <текст>
   Тег для файла формата LRC: название произведения.

--lrc-author <текст>
   Тег для файла формата LRC: автор.

--lrc-creator <текст>
   Тег для файла формата LRC: создатель файла.

--srt-length <число>
   Установить максимальную длину строк для файла формата SRT (в символах).

--srt-fname <имя_файла>
   Имя файла формата SRT. Параметр может быть полезен в тех случаях, когда в командной строке задан параметр [-o].

--srt-enc <кодировка>
   Кодировка файла формата SRT ("ansi", "utf8" или "unicode"). По умолчанию значение равно "ansi".

--raw
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: записать аудиоданные в формате RAW PCM; данные не содержат заголовок формата WAV.
   Параметр используется совместно с параметром [-o].

--ignore-length или -il
   SAPI 4: параметр не используется.
   SAPI 5 и Microsoft Speech Platform: не записывать размер аудиоданных в заголовок формата WAV.
   Параметр используется совместно с параметром [-o].

--sub-format <текст>
   Формат субтитров ("srt", "ssa", "ass" или "smi"). Если параметр не задан, формат будет определен по расширению имени файла субтитров.

--sub-fit или -sf
   Автоматически увеличивать скорость речи для того, чтобы уложиться в интервалы времени, заданные в субтитрах.

--sub-max <число> или -sm <число>
   Установить максимальную скорость речи в диапазоне от -10 до 10 (для преобразования субтитров в звуковой файл).

--delete-file или -df
   Удалить текстовый файл после завершения чтения вслух или сохранения звукового файла. Параметр используется совместно с параметром [-f].

--ignore-square-brackets или -isb
   Игнорировать текст в [квадратных скобках].

--ignore-curly-brackets или -icb
   Игнорировать текст в {фигурных скобках}.

--ignore-angle-brackets или -iab
   Игнорировать текст в <угловых скобках>.

--ignore-round-brackets или -irb
   Игнорировать текст в (круглых скобках).

--ignore-comments или -ic
   Игнорировать комментарии в тексте. Однострочные комментарии начинаются с // и продолжаются до конца строки. Многострочные комментарии начинаются с /* и завершаются */.


*** Примеры ***

Создать текстовый файл со списком голосов, установленных на компьютере:

balcon -l > voice.txt


Показать характеристики голоса Microsoft Anna:

balcon -n "Microsoft Anna" -m


Преобразовать текстовый файл BOOK.TXT в звуковой файл BOOK.WAV:

balcon -f "d:\Text\book.txt" -w "d:\Sound\book.wav" -n "Emma"


Получить текст из буфера обмена, применить правила из словарей коррекции произношения и прочесть вслух:

balcon -n "Olga" -c -d "d:\rex\rules.rex" -d "d:\dic\rules.dic"


Прочесть текст из командной строки с заданными скоростью и громкостью:

balcon -n "Alyona" -t "Текст будет прочитан медленно." -s -5 -v 70


Остановить работу других экземпляров консольного приложения:

balcon -k


Преобразовать текст из стандартного потока ввода в звуковой файл BOOK.WAV и создать файл BOOK.LRC:

balcon -w "d:\book.wav" -i -lrc --lrc-length 80 --lrc-title "The Lord of the Rings"


Преобразовать субтитры в звуковой файл FILM.WAV:

balcon -f "d:\Text\film.srt" -w "d:\Sound\film.wav" -n "Laura" --sub-fit --sub-max 2


Пример использования приложения совместно с утилитой LAME.EXE:

balcon -f d:\book.txt -n Alyona -o --raw | lame -r -s 22.05 -m m -h - d:\book.mp3


Пример использования приложения совместно с утилитой OGGENC2.EXE:

balcon -f d:\book.txt -n Alyona -o -il | oggenc2 --ignorelength - -o d:\book.ogg


Пример использования приложения совместно с утилитой WMAENCODE.EXE:

balcon -f d:\book.txt -n Alyona -o -il | wmaencode - d:\book.wma --ignorelength


*** Файл конфигурации ***

Параметры можно сохранить как файл конфигурации "balcon.cfg" в той же папке, что и консольное приложение.

Пример содержимого файла:
===============
-f d:\Text\book.txt
-w d:\Sound\book.wav
-n Microsoft Anna
-s 2
-p -1
-v 95
-e 300
-d d:\Dict\rules.bxd
-lrc
--lrc-length 75
--lrc-enc utf8
--lrc-offset 300
===============

Программа может комбинировать параметры из файла конфигурации и командной строки.


*** Аудиоклипы ***

Программа позволяет вставлять ссылки на внешние звуковые файлы формата WAV (аудиоклипы) в текст. Тег вставки аудиоклипа будет выглядеть так:

{{Audio=C:\Sounds\ring.wav}}

Во время чтения вслух, когда в тексте встретится ссылка на аудиоклип, программа будет приостанавливать речь, воспроизводить аудиоклип, а затем продолжать чтение.
При записи речи в файл программа вставит аудиоданные из внешнего звукового файла внутрь нового файла.


*** Лицензия ***

Коммерческое использование программы допускается только с разрешения правообладателя.

Запрещается использование программного продукта на компьютерах, принадлежащих органам государственной власти и органам местного самоуправления Российской Федерации, законодательным и судебным органам Российской Федерации, структурным подразделениям российских политических партий. Запрещается использование программного продукта на компьютерах, принадлежащих правоохранительным органам и федеральным службам Российской Федерации, Вооружённым силам Российской Федерации. Запрещается использование программы религиозными объединениями и организациями в Российской Федерации. Запрещается использование программного продукта на компьютерах, принадлежащих "Всероссийскому ордена Трудового Красного Знамени обществу слепых", "Общероссийскому народному фронту" и всероссийскому молодежному военно-патриотическому общественному движению "Юнармия". Запрещается использование программы на компьютерах, находящихся в личном пользовании членов и сотрудников вышеперечисленных организаций, а также членов их семей.

###